@page
@model RegistrationModel
@{
    ViewData["Title"] = "Registration";
	Layout = "";
}
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>@ViewData["Title"] - Registration</title>
	<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
			<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/MeetingWebsite.styles.css" asp-append-version="true" />
	<!-- Custom styles for this template -->
	<link href="~/css/sidebars.css" rel="stylesheet">
</head>
<div class="container mt-5">
	<div class="row justify-content-center">
		<div class="col-lg-6 col-md-8 col-sm-10">
			<main class="form-signin w-75 m-auto">
				<form>
			<h1 class="h3 mb-3 fw-normal">Регистрация</h1>
					<div class="form-floating">
						@*<label for="username" class="form-label">Имя пользователя</label>*@
						<input type="text" class="form-control" id="floatingInput" placeholder="Username">
						<label for="floatingInput">Имя пользователя</label>
					</div>
					<div class="form-floating">
						@*<label for="email" class="form-label">E-mail</label>*@
						<input type="email" class="form-control" id="floatingInput" placeholder="email">
						<label for="floatingInput">E-mail</label>
					</div>
					<div class="form-floating">
						@*<label for="password" class="form-label">Пароль</label>*@
						<input type="password" class="form-control" id="floatingPassword" placeholder="password">
						<label for="floatingInput">Пароль</label>
					</div>
					<div class="form-floating">
						@*<label for="confirm-password" class="form-label">Подтвердите пароль</label>*@
						<input type="password" class="form-control" id="floatingPassword" placeholder="confirm-password">
						<label for="floatingInput">Подтвердите пароль</label>
					</div>
					<div class="mb-3 form-check">
						<input type="checkbox" class="form-check-input" id="terms" name="terms" required>
						<label class="form-check-label" for="terms">Я согласен с <a href="#">условиями использования</a></label>
					</div>
					<a href="/Login" class="btn btn-primary w-100">Зарегистрироваться</a>

				</form>
			</main>

		</div>
	</div>
</div>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
<script src="~/js/sidebars.js"></script>
<script>
	$(function () {
		$('#registrationForm').submit(function (e) {
			e.preventDefault();
			var name = $('#username').val();
			var mail = $('#email').val();
			var password = $('#password').val();
			var confirmPassword = $('#confirmPassword').val();
			var terms = $('#terms').prop('checked');

			if (password !== confirmPassword) {
				alert('Пароли не совпадают');
				return;
			}

			if (!terms) {
				alert('Необходимо согласиться с условиями использования');
				return;
			}

			// Создать объект с данными для отправки на сервер
			var data = {
				name: name,
				mail: mail,
				password: password
			};

			// Отправить POST-запрос на сервер
			$.ajax({
				url: '/register', // Здесь указывается URL-путь для обработки регистрации на сервере
				type: 'POST',
				data: data,
				success: function (response) {
					// Обработка успешного ответа сервера после регистрации
					console.log(response);
					alert('Регистрация прошла успешно');
					// Дополнительные действия, например, перенаправление на другую страницу
				},
				error: function (xhr, status, error) {
					// Обработка ошибки при регистрации
					console.log(xhr.responseText);
					alert('Ошибка регистрации');
				}
			});
		});
	});
</script>